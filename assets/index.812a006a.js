import{c as y,j as g,r as u,R as L,a as b}from"./vendor.ab3c808e.js";const w=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};w();function D({todoInput:e}){const t=n=>{if(n.key==="Escape")return n.preventDefault(),e==null?void 0:e.current.blur();if(n.originalTarget.tagName!=="INPUT"&&n.key==="i")return n.preventDefault(),e==null?void 0:e.current.focus()};return()=>(document.body.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)})}const h=y(e=>({todos:[],selectedTodo:{},setTodos:t=>e({todos:t}),addTodo:t=>e(n=>({todos:[...n.todos,t]})),removeTodo:t=>e(n=>({todos:n.todos.filter(l=>l.id!==t)})),selectTodo:t=>e(n=>({selectedTodo:t?n.todos.find(l=>l.id===t):{}})),updateSelectedText:t=>e(n=>n.selectedTodo.text=t)})),c=g.exports.jsx,v=g.exports.jsxs;function O({todo:e,setCompleted:t}){const n=h(d=>d.selectTodo),[l,o]=u.exports.useState(e.completed_at?new Date(e.completed_at):null),s=l!==null,i=()=>{const d=!s;return e.completed_at=d?new Date:null,t(m=>{const p=m.findIndex(f=>e.id===f.id);return d&&p===-1?[...m,e]:!d&&p!==-1?m.filter(f=>e.id!==f.id):m}),o(e.completed_at)},x=d=>d?`${d.toLocaleString()}`:"";return c("li",{children:v("div",{className:"todo-item",children:[c("button",{tabIndex:"0",onClick:i,onContextMenu:d=>{d.preventDefault(),n(e.id)},className:`item-text ${s&&"completed"}`,children:e.text}),c("small",{className:"completed-at",children:x(l)})]})})}function C(){const[e,t]=u.exports.useState(""),[n,l]=u.exports.useState([]),o=u.exports.useRef(null),s=D({todoInput:o}),[i,x,a]=h(r=>[r.todos,r.setTodos,r.selectedTodo]),d=()=>localStorage.setItem("todos",JSON.stringify(i)),[m,p,f,S]=h(r=>[r.addTodo,r.removeTodo,r.updateSelectedText,r.selectTodo]);u.exports.useEffect(()=>{var r;s(),x((r=JSON.parse(localStorage.getItem("todos")))!=null?r:[])},[]),u.exports.useEffect(()=>{t(a.text),o.current.focus()},[a.id]),u.exports.useEffect(d,[i,n]);const N=r=>m({id:Date.now(),text:r,completed_at:null});return v("div",{className:"columns",children:[v("div",{className:"column",children:[c("h1",{children:"TODO List"}),c("form",{onSubmit:r=>{r.preventDefault();const T=e;if(!!e)return t(""),a.id?T.length?(f(T),d(),S(null)):p(a.id):(o.current.focus(),N(T))},children:c("fieldset",{children:c("div",{children:c("input",{ref:o,className:"input",placeholder:a.id?"Press enter to delete":"New item",onInput:r=>t(r.target.value),value:e||""})})})}),c("ul",{className:"todo-list",children:i.map(r=>c(O,{todo:r,setCompleted:l},r.id))})]}),c("div",{className:"column summary",children:c("h2",{children:"Summary"})})]})}function E(){return c(C,{})}L.render(c(b.StrictMode,{children:c(E,{})}),document.getElementById("root"));
